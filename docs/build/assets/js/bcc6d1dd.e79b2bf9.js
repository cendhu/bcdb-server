"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8888],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return g}});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var u=r.createContext({}),l=function(e){var n=r.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=l(e.components);return r.createElement(u.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,u=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=l(t),g=i,m=p["".concat(u,".").concat(g)]||p[g]||d[g]||a;return t?r.createElement(m,o(o({ref:n},c),{},{components:t})):r.createElement(m,o({ref:n},c))}));function g(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,o=new Array(a);o[0]=p;var s={};for(var u in n)hasOwnProperty.call(n,u)&&(s[u]=n[u]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var l=2;l<a;l++)o[l]=t[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},5651:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return u},metadata:function(){return l},toc:function(){return c},default:function(){return p}});var r=t(7462),i=t(3366),a=(t(7294),t(3905)),o=["components"],s={id:"user",title:"Query an User Information"},u=void 0,l={unversionedId:"external/getting-started/queries/curl/user",id:"external/getting-started/queries/curl/user",isDocsHomePage:!1,title:"Query an User Information",description:"Querying the User Information",source:"@site/docs/external/getting-started/queries/curl/user.md",sourceDirName:"external/getting-started/queries/curl",slug:"/external/getting-started/queries/curl/user",permalink:"/orion-server/docs/external/getting-started/queries/curl/user",tags:[],version:"current",frontMatter:{id:"user",title:"Query an User Information"},sidebar:"Documentation",previous:{title:"Query a Node's Configuration",permalink:"/orion-server/docs/external/getting-started/queries/curl/node-config"},next:{title:"Check the Existance of a Database",permalink:"/orion-server/docs/external/getting-started/queries/curl/db"}},c=[{value:"Querying the User Information",id:"querying-the-user-information",children:[],level:2}],d={toc:c};function p(e){var n=e.components,t=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"querying-the-user-information"},"Querying the User Information"),(0,a.kt)("p",null,"One user can query information about another user or self. If the access control is defined for the user entry, it would be enforced during the query.\nA user information can be retrieved by issuing a ",(0,a.kt)("inlineCode",{parentName:"p"},"GET")," request on ",(0,a.kt)("inlineCode",{parentName:"p"},"/user/{userid}")," endpoint where ",(0,a.kt)("inlineCode",{parentName:"p"},"{userid}")," should be replaced with the ID of the user\nwhom information needs to be fetched."),(0,a.kt)("p",null,"Here, the submitting user needs to sign the ",(0,a.kt)("inlineCode",{parentName:"p"},'{"user_id":"<submitting_user_id>","target_user_id":"<target_user_id"}')," where ",(0,a.kt)("inlineCode",{parentName:"p"},"<submitting_user_id>")," denotes the\nID of the user who is submitting the query and ",(0,a.kt)("inlineCode",{parentName:"p"},"<target_user_id>")," denotes the ID of the user whom information needs to be fetched."),(0,a.kt)("p",null,"In our ",(0,a.kt)("inlineCode",{parentName:"p"},"config.yml"),", we have an admin entry with ID ",(0,a.kt)("inlineCode",{parentName:"p"},"admin"),". Hence, we do a self query.\nIn our example, the submitting user ",(0,a.kt)("inlineCode",{parentName:"p"},"admin")," wants to fetch its own information and hence, the following data needs to be signer\n",(0,a.kt)("inlineCode",{parentName:"p"},'{"user_id":"admin","target_user_id":"admin"}')," as follows:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},'./bin/signer -privatekey=deployment/sample/crypto/admin/admin.key -data=\'{"user_id":"admin","target_user_id":"admin"}\'\n')),(0,a.kt)("p",null,"The above command would produce a digital signature and prints it as base64 encoded string as shown below:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"MEQCIB6NmOvgUvYwRLBAFz/OovrGRfhnwbxMwFb4+Dniano6AiBbObFcC6Cv/wcBLXzDf3pG0zybHTSA5ksMGCusfAridw==\n")),(0,a.kt)("p",null,"Once the signature is computed, we can issue a ",(0,a.kt)("inlineCode",{parentName:"p"},"GET")," request using the following ",(0,a.kt)("inlineCode",{parentName:"p"},"cURL")," command\nby setting the above signature string in the ",(0,a.kt)("inlineCode",{parentName:"p"},"Signature")," header."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},'curl \\\n   -H "Content-Type: application/json" \\\n   -H "UserID: admin" \\\n   -H "Signature: MEQCIB6NmOvgUvYwRLBAFz/OovrGRfhnwbxMwFb4+Dniano6AiBbObFcC6Cv/wcBLXzDf3pG0zybHTSA5ksMGCusfAridw==" \\\n   -X GET http://127.0.0.1:6001/user/admin | jq .\n')),(0,a.kt)("p",null,"A sample output of the above command is shown below. "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "response": {\n    "header": {\n      "node_id": "bdb-node-1"\n    },\n    "user": {\n      "id": "admin",\n      "certificate": "MIIBsTCCAVigAwIBAgIRANDg6u+E+sdowdPBGXyoD9swCgYIKoZIzj0EAwIwHjEcMBoGA1UEAxMTQ2FyIHJlZ2lzdHJ5IFJvb3RDQTAeFw0yMTA2MTYxMTEzMjdaFw0yMjA2MTYxMTE4MjdaMCQxIjAgBgNVBAMTGUNhciByZWdpc3RyeSBDbGllbnQgYWRtaW4wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAAT9GYTj7ka7se8bEqclDdulRJnpay+EU/b4QUMiLl/9cB1iBgKegVXztZCcQs3S+XR1Y2b/1xSqMbPwHOV5kuUDo3EwbzAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHwYDVR0jBBgwFoAU7nVzp7gto++BPlj5KAF1IA62TNEwDwYDVR0RBAgwBocEfwAAATAKBggqhkjOPQQDAgNHADBEAiB09qz5bAyguEEI4HMUPIBqRTF3RBMjfTKrpIjBh1ai9gIgWLL0SNsD/5a4xjp+fol42npUY13mIpByYg56IW0TsBI=",\n      "privilege": {\n        "admin": true\n      }\n    },\n    "metadata": {\n      "version": {\n        "block_num": 1\n      }\n    }\n  },\n  "signature": "MEUCIQDN7DAo/2drpnQYB9lonKcqNQRjRooARhw1D+aSZgOhyAIgbAbofC016zyBcccu6BRfwSrYDbQnekbSu9lJVR1FCOw="\n}\n')))}p.isMDXComponent=!0}}]);